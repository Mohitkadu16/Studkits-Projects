#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2);

const int analogPin = A0;
const int digitalPin = 7;
const int redLed = 8;
const int greenLed = 9;
const int buzzer = 10;

int gasValue = 0;
int threshold = 300;

void setup() {
  lcd.init();
  lcd.backlight();

  pinMode(analogPin, INPUT);
  pinMode(digitalPin, INPUT);
  pinMode(redLed, OUTPUT);
  pinMode(greenLed, OUTPUT);
  pinMode(buzzer, OUTPUT);

  lcd.setCursor(0, 0);
  lcd.print("Gas Detector");
  delay(2000);
  lcd.clear();
}

void loop() {
  gasValue = analogRead(analogPin);
  int gasDetected = digitalRead(digitalPin);

  lcd.setCursor(0, 0);
  lcd.print("Gas: ");
  lcd.print(gasValue);
  lcd.print("   ");

  if (gasDetected == HIGH || gasValue > threshold) {
    digitalWrite(redLed, HIGH);
    digitalWrite(greenLed, LOW);
    tone(buzzer, 1000);
    lcd.setCursor(0, 1);
    lcd.print("Gas Leakage!!! ");
  } else {
    digitalWrite(redLed, LOW);
    digitalWrite(greenLed, HIGH);
    noTone(buzzer);
    lcd.setCursor(0, 1);
    lcd.print("Safe           ");
  }

  delay(500);
}
